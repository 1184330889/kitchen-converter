<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Converter - Easy Cooking Unit Conversion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: #ff6b6b;
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .theme-switcher {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theme-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(180deg);
        }
        
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            padding: 8px 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s;
        }
        
        .lang-btn.active {
            background: rgba(255,255,255,0.3);
            font-weight: bold;
        }
        
        .lang-btn:hover {
            background: rgba(255,255,255,0.25);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .converter-section {
            padding: 30px;
        }
        
        .conversion-type {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .conversion-type:hover {
            border-color: #ff6b6b;
            transform: translateY(-2px);
        }
        
        .conversion-type h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .input-field {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            min-width: 100px;
        }
        
        .unit-select {
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            min-width: 120px;
        }
        
        .convert-btn {
            background: #ff6b6b;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .convert-btn:hover {
            background: #ff5252;
        }
        
        .result {
            margin-top: 15px;
            padding: 20px;
            background: #e8f5e8;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            color: #2e7d32;
            display: none;
            position: relative;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .result-text {
            flex: 1;
            min-width: 200px;
        }

        .result-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .tabs {
            display: flex;
            background: #f1f3f4;
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .tab.active {
            background: #ff6b6b;
            color: white;
        }
        
        .ingredient-converter {
            display: none;
        }
        
        .ingredient-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .ingredient-item {
            padding: 15px;
            background: #fff3e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .ingredient-item:hover {
            background: #ffe0b2;
            transform: scale(1.05);
        }

        .ingredient-item.hidden {
            display: none;
        }
        
        .portion-example {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        /* ÊêúÁ¥¢Ê°ÜÊ†∑Âºè */
        .search-section {
            margin-bottom: 20px;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: white;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            border-color: #ff6b6b;
        }

        /* ÂàÜÁ±ªÈÄâÊã©Ê†∑Âºè */
        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .category-btn {
            padding: 10px 20px;
            background: #f1f3f4;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .category-btn.active {
            background: #ff6b6b;
            color: white;
            font-weight: bold;
        }

        .category-btn:hover {
            background: #ff9999;
            color: white;
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩïÊ†∑Âºè */
        .history-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 4px solid #ff6b6b;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .clear-history-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            transition: background 0.3s;
        }

        .clear-history-btn:hover {
            background: #c82333;
        }

        .history-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            padding: 10px;
            margin-bottom: 8px;
            background: white;
            border-radius: 10px;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.3s;
        }

        .history-item:hover {
            background: #e9ecef;
        }

        .history-item .conversion-text {
            flex: 1;
        }

        .history-item .timestamp {
            color: #666;
            font-size: 0.8em;
        }

        .no-history {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        /* Â§çÂà∂ÊåâÈíÆÊ†∑Âºè */
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .copy-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .copy-btn.copied {
            background: #17a2b8;
            animation: copySuccess 0.3s ease;
        }

        @keyframes copySuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Â§çÂà∂ÊàêÂäüÊèêÁ§∫ */
        .copy-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 0.9em;
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s ease;
        }

        .copy-toast.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩïÈ°πÁöÑÂ§çÂà∂ÊåâÈíÆ */
        .history-item .copy-btn {
            padding: 4px 8px;
            font-size: 0.7em;
            margin-left: 8px;
        }

        /* Â§úÈó¥Ê®°ÂºèÊ†∑Âºè */
        body.dark-theme {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .dark-theme .container {
            background: #2c3e50;
            color: #ecf0f1;
        }

        .dark-theme .header {
            background: #e74c3c;
        }

        .dark-theme .conversion-type {
            background: #34495e;
            border-color: transparent;
        }

        .dark-theme .conversion-type:hover {
            border-color: #e74c3c;
        }

        .dark-theme .conversion-type h3 {
            color: #ecf0f1;
        }

        .dark-theme .input-field,
        .dark-theme .unit-select {
            background: #34495e;
            border-color: #5a6c7d;
            color: #ecf0f1;
        }

        .dark-theme .input-field:focus,
        .dark-theme .unit-select:focus {
            border-color: #e74c3c;
        }

        .dark-theme .convert-btn {
            background: #e74c3c;
        }

        .dark-theme .convert-btn:hover {
            background: #c0392b;
        }

        .dark-theme .result {
            background: #27ae60;
            color: #ecf0f1;
        }

        .dark-theme .tabs {
            background: #34495e;
        }

        .dark-theme .tab {
            color: #bdc3c7;
        }

        .dark-theme .tab.active {
            background: #e74c3c;
            color: white;
        }

        .dark-theme .ingredient-item {
            background: #34495e;
            color: #ecf0f1;
        }

        .dark-theme .ingredient-item:hover {
            background: #3d566e;
        }

        .dark-theme .search-box {
            background: #34495e;
            border-color: #5a6c7d;
            color: #ecf0f1;
        }

        .dark-theme .search-box:focus {
            border-color: #e74c3c;
        }

        .dark-theme .search-box::placeholder {
            color: #95a5a6;
        }

        .dark-theme .category-btn {
            background: #34495e;
            color: #ecf0f1;
        }

        .dark-theme .category-btn.active {
            background: #e74c3c;
            color: white;
        }

        .dark-theme .category-btn:hover {
            background: #e74c3c;
            color: white;
        }

        .dark-theme .history-section {
            background: #34495e;
            border-left-color: #e74c3c;
        }

        .dark-theme .history-title {
            color: #ecf0f1;
        }

        .dark-theme .history-item {
            background: #2c3e50;
            color: #ecf0f1;
        }

        .dark-theme .history-item:hover {
            background: #3d566e;
        }

        .dark-theme .history-item .timestamp {
            color: #95a5a6;
        }

        .dark-theme .no-history {
            color: #95a5a6;
        }

        .dark-theme .clear-history-btn {
            background: #c0392b;
        }

        .dark-theme .clear-history-btn:hover {
            background: #a93226;
        }

        .dark-theme .copy-btn {
            background: #28a745;
        }

        .dark-theme .copy-btn:hover {
            background: #1e7e34;
        }

        .dark-theme .copy-btn.copied {
            background: #17a2b8;
        }

        .dark-theme .copy-toast {
            background: #1e7e34;
        }

        .dark-theme .unit-select option {
            background: #34495e;
            color: #ecf0f1;
        }
        
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }
            
            .input-field, .unit-select {
                width: 100%;
            }
            
            .theme-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 15px;
            }
            
            .language-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }
            
            .header {
                padding: 20px;
            }

            .category-tabs {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .category-btn {
                white-space: nowrap;
                min-width: fit-content;
            }

            .result {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .result-actions {
                width: 100%;
                justify-content: center;
            }
            
            .copy-toast {
                right: 10px;
                left: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="theme-switcher">
                <button class="theme-btn" onclick="toggleTheme()" id="themeBtn" title="Toggle Dark Mode">
                    üåô
                </button>
            </div>
            
            <div class="language-switcher">
                <button class="lang-btn active" onclick="switchLanguage('en', this)">English</button>
                <button class="lang-btn" onclick="switchLanguage('zh', this)">‰∏≠Êñá</button>
            </div>
            <h1 data-lang-en="üç≥ Kitchen Converter" data-lang-zh="üç≥ Âé®ÊàøËΩ¨Êç¢Âô®">üç≥ Kitchen Converter</h1>
            <p data-lang-en="Quick & Easy Cooking Unit Conversion" data-lang-zh="Âø´ÈÄü‰æøÊç∑ÁöÑÁÉπÈ•™Âçï‰ΩçËΩ¨Êç¢Â∑•ÂÖ∑">Quick & Easy Cooking Unit Conversion</p>
        </div>
        
        <div class="converter-section">
            <div class="tabs">
                <div class="tab active" onclick="showTab('basic', this)" data-lang-en="Basic Units" data-lang-zh="Âü∫Á°ÄÂçï‰Ωç">Basic Units</div>
                <div class="tab" onclick="showTab('ingredients', this)" data-lang-en="Smart Ingredients" data-lang-zh="Êô∫ËÉΩÈ£üÊùê">Smart Ingredients</div>
                <div class="tab" onclick="showTab('portions', this)" data-lang-en="Portion Scaler" data-lang-zh="‰ªΩÈáèË∞ÉÊï¥">Portion Scaler</div>
            </div>
            
            <!-- Basic Conversion -->
            <div id="basic-converter" class="tab-content">
                <!-- Weight Conversion -->
                <div class="conversion-type">
                    <h3 data-lang-en="‚öñÔ∏è Weight Conversion" data-lang-zh="‚öñÔ∏è ÈáçÈáèËΩ¨Êç¢">‚öñÔ∏è Weight Conversion</h3>
                    <div class="input-group">
                        <input type="number" class="input-field" id="weightInput" data-placeholder-en="Enter weight" data-placeholder-zh="ËæìÂÖ•ÈáçÈáè" placeholder="Enter weight">
                        <select class="unit-select" id="weightFrom">
                            <option value="g" data-lang-en="Grams (g)" data-lang-zh="ÂÖã (g)">Grams (g)</option>
                            <option value="kg" data-lang-en="Kilograms (kg)" data-lang-zh="ÂçÉÂÖã (kg)">Kilograms (kg)</option>
                            <option value="oz" data-lang-en="Ounces (oz)" data-lang-zh="ÁõéÂè∏ (oz)">Ounces (oz)</option>
                            <option value="lb" data-lang-en="Pounds (lb)" data-lang-zh="Á£Ö (lb)">Pounds (lb)</option>
                        </select>
                        <span>‚Üí</span>
                        <select class="unit-select" id="weightTo">
                            <option value="oz" data-lang-en="Ounces (oz)" data-lang-zh="ÁõéÂè∏ (oz)">Ounces (oz)</option>
                            <option value="g" data-lang-en="Grams (g)" data-lang-zh="ÂÖã (g)">Grams (g)</option>
                            <option value="kg" data-lang-en="Kilograms (kg)" data-lang-zh="ÂçÉÂÖã (kg)">Kilograms (kg)</option>
                            <option value="lb" data-lang-en="Pounds (lb)" data-lang-zh="Á£Ö (lb)">Pounds (lb)</option>
                        </select>
                        <button class="convert-btn" onclick="convertWeight()" data-lang-en="Convert" data-lang-zh="ËΩ¨Êç¢">Convert</button>
                    </div>
                    <div class="result" id="weightResult" style="display: none;">
                        <div class="result-text" id="weightResultText"></div>
                        <div class="result-actions">
                            <button class="copy-btn" onclick="copyResult('weight')" 
                                    data-lang-en="üìã Copy" data-lang-zh="üìã Â§çÂà∂">üìã Copy</button>
                        </div>
                    </div>
                    
                    <div class="history-section" id="weightHistory" style="display: none;">
                        <div class="history-header">
                            <span class="history-title" data-lang-en="Recent Conversions" data-lang-zh="ÊúÄËøëËΩ¨Êç¢">Recent Conversions</span>
                            <button class="clear-history-btn" onclick="clearHistory('weight')" 
                                    data-lang-en="Clear" data-lang-zh="Ê∏ÖÈô§">Clear</button>
                        </div>
                        <div class="history-list" id="weightHistoryList">
                            <div class="no-history" data-lang-en="No recent conversions" data-lang-zh="ÊöÇÊó†ËΩ¨Êç¢ËÆ∞ÂΩï">No recent conversions</div>
                        </div>
                    </div>
                </div>
                
                <!-- Volume Conversion -->
                <div class="conversion-type">
                    <h3 data-lang-en="ü•§ Volume Conversion" data-lang-zh="ü•§ ‰ΩìÁßØËΩ¨Êç¢">ü•§ Volume Conversion</h3>
                    <div class="input-group">
                        <input type="number" class="input-field" id="volumeInput" data-placeholder-en="Enter volume" data-placeholder-zh="ËæìÂÖ•‰ΩìÁßØ" placeholder="Enter volume">
                        <select class="unit-select" id="volumeFrom">
                            <option value="ml" data-lang-en="Milliliters (ml)" data-lang-zh="ÊØ´Âçá (ml)">Milliliters (ml)</option>
                            <option value="l" data-lang-en="Liters (l)" data-lang-zh="Âçá (l)">Liters (l)</option>
                            <option value="cup" data-lang-en="Cups" data-lang-zh="ÊùØ">Cups</option>
                            <option value="tbsp" data-lang-en="Tablespoons" data-lang-zh="Ê±§Âåô">Tablespoons</option>
                            <option value="tsp" data-lang-en="Teaspoons" data-lang-zh="Ëå∂Âåô">Teaspoons</option>
                            <option value="fl-oz" data-lang-en="Fluid Ounces" data-lang-zh="Ê∂≤‰ΩìÁõéÂè∏">Fluid Ounces</option>
                        </select>
                        <span>‚Üí</span>
                        <select class="unit-select" id="volumeTo">
                            <option value="cup" data-lang-en="Cups" data-lang-zh="ÊùØ">Cups</option>
                            <option value="ml" data-lang-en="Milliliters (ml)" data-lang-zh="ÊØ´Âçá (ml)">Milliliters (ml)</option>
                            <option value="l" data-lang-en="Liters (l)" data-lang-zh="Âçá (l)">Liters (l)</option>
                            <option value="tbsp" data-lang-en="Tablespoons" data-lang-zh="Ê±§Âåô">Tablespoons</option>
                            <option value="tsp" data-lang-en="Teaspoons" data-lang-zh="Ëå∂Âåô">Teaspoons</option>
                            <option value="fl-oz" data-lang-en="Fluid Ounces" data-lang-zh="Ê∂≤‰ΩìÁõéÂè∏">Fluid Ounces</option>
                        </select>
                        <button class="convert-btn" onclick="convertVolume()" data-lang-en="Convert" data-lang-zh="ËΩ¨Êç¢">Convert</button>
                    </div>
                    <div class="result" id="volumeResult" style="display: none;">
                        <div class="result-text" id="volumeResultText"></div>
                        <div class="result-actions">
                            <button class="copy-btn" onclick="copyResult('volume')" 
                                    data-lang-en="üìã Copy" data-lang-zh="üìã Â§çÂà∂">üìã Copy</button>
                        </div>
                    </div>
                    
                    <div class="history-section" id="volumeHistory" style="display: none;">
                        <div class="history-header">
                            <span class="history-title" data-lang-en="Recent Conversions" data-lang-zh="ÊúÄËøëËΩ¨Êç¢">Recent Conversions</span>
                            <button class="clear-history-btn" onclick="clearHistory('volume')" 
                                    data-lang-en="Clear" data-lang-zh="Ê∏ÖÈô§">Clear</button>
                        </div>
                        <div class="history-list" id="volumeHistoryList">
                            <div class="no-history" data-lang-en="No recent conversions" data-lang-zh="ÊöÇÊó†ËΩ¨Êç¢ËÆ∞ÂΩï">No recent conversions</div>
                        </div>
                    </div>
                </div>
                
                <!-- Temperature Conversion -->
                <div class="conversion-type">
                    <h3 data-lang-en="üå°Ô∏è Temperature Conversion" data-lang-zh="üå°Ô∏è Ê∏©Â∫¶ËΩ¨Êç¢">üå°Ô∏è Temperature Conversion</h3>
                    <div class="input-group">
                        <input type="number" class="input-field" id="tempInput" data-placeholder-en="Enter temperature" data-placeholder-zh="ËæìÂÖ•Ê∏©Â∫¶" placeholder="Enter temperature">
                        <select class="unit-select" id="tempFrom">
                            <option value="c" data-lang-en="Celsius (¬∞C)" data-lang-zh="ÊëÑÊ∞èÂ∫¶ (¬∞C)">Celsius (¬∞C)</option>
                            <option value="f" data-lang-en="Fahrenheit (¬∞F)" data-lang-zh="ÂçéÊ∞èÂ∫¶ (¬∞F)">Fahrenheit (¬∞F)</option>
                        </select>
                        <span>‚Üí</span>
                        <select class="unit-select" id="tempTo">
                            <option value="f" data-lang-en="Fahrenheit (¬∞F)" data-lang-zh="ÂçéÊ∞èÂ∫¶ (¬∞F)">Fahrenheit (¬∞F)</option>
                            <option value="c" data-lang-en="Celsius (¬∞C)" data-lang-zh="ÊëÑÊ∞èÂ∫¶ (¬∞C)">Celsius (¬∞C)</option>
                        </select>
                        <button class="convert-btn" onclick="convertTemperature()" data-lang-en="Convert" data-lang-zh="ËΩ¨Êç¢">Convert</button>
                    </div>
                    <div class="result" id="tempResult" style="display: none;">
                        <div class="result-text" id="tempResultText"></div>
                        <div class="result-actions">
                            <button class="copy-btn" onclick="copyResult('temp')" 
                                    data-lang-en="üìã Copy" data-lang-zh="üìã Â§çÂà∂">üìã Copy</button>
                        </div>
                    </div>
                    
                    <div class="history-section" id="tempHistory" style="display: none;">
                        <div class="history-header">
                            <span class="history-title" data-lang-en="Recent Conversions" data-lang-zh="ÊúÄËøëËΩ¨Êç¢">Recent Conversions</span>
                            <button class="clear-history-btn" onclick="clearHistory('temp')" 
                                    data-lang-en="Clear" data-lang-zh="Ê∏ÖÈô§">Clear</button>
                        </div>
                        <div class="history-list" id="tempHistoryList">
                            <div class="no-history" data-lang-en="No recent conversions" data-lang-zh="ÊöÇÊó†ËΩ¨Êç¢ËÆ∞ÂΩï">No recent conversions</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Smart Ingredients Converter -->
            <div id="ingredients-converter" class="tab-content ingredient-converter">
                <h3 data-lang-en="ü•Ñ Smart Ingredient Converter" data-lang-zh="ü•Ñ Êô∫ËÉΩÈ£üÊùêËΩ¨Êç¢Âô®">ü•Ñ Smart Ingredient Converter</h3>
                
                <div class="search-section">
                    <input type="text" class="search-box" id="ingredientSearch" 
                           data-placeholder-en="Search ingredients..." 
                           data-placeholder-zh="ÊêúÁ¥¢È£üÊùê..." 
                           placeholder="Search ingredients..."
                           oninput="filterIngredients()">
                </div>
                
                <div class="category-tabs">
                    <button class="category-btn active" onclick="filterByCategory('all', this)" 
                            data-lang-en="All" data-lang-zh="ÂÖ®ÈÉ®">All</button>
                    <button class="category-btn" onclick="filterByCategory('baking', this)" 
                            data-lang-en="Baking" data-lang-zh="ÁÉòÁÑô">Baking</button>
                    <button class="category-btn" onclick="filterByCategory('liquid', this)" 
                            data-lang-en="Liquids" data-lang-zh="Ê∂≤‰Ωì">Liquids</button>
                    <button class="category-btn" onclick="filterByCategory('protein', this)" 
                            data-lang-en="Protein" data-lang-zh="ËõãÁôΩË¥®">Protein</button>
                    <button class="category-btn" onclick="filterByCategory('spice', this)" 
                            data-lang-en="Others" data-lang-zh="ÂÖ∂‰ªñ">Others</button>
                </div>
                
                <p style="margin-bottom: 20px; color: #666;" 
                   data-lang-en="Click on an ingredient to see common conversions:" 
                   data-lang-zh="ÁÇπÂáªÈ£üÊùêÊü•ÁúãÂ∏∏Áî®ËΩ¨Êç¢Ôºö">Click on an ingredient to see common conversions:</p>
                   <div class="ingredient-list" id="ingredientList"></div>
                
                   <div class="result" id="ingredientResult" style="display: none; margin-top: 20px;"></div>
               </div>
               
               <!-- Portion Scaler -->
               <div id="portions-converter" class="tab-content ingredient-converter">
                   <h3 data-lang-en="üë• Recipe Portion Scaler" data-lang-zh="üë• È£üË∞±‰ªΩÈáèË∞ÉÊï¥Âô®">üë• Recipe Portion Scaler</h3>
                   <div class="conversion-type">
                       <div class="input-group">
                           <label data-lang-en="Original serves:" data-lang-zh="ÂéüÂßã‰ªΩÈáèÔºö">Original serves:</label>
                           <input type="number" class="input-field" id="originalPortions" value="4" style="max-width: 100px;">
                           <label data-lang-en="Want to serve:" data-lang-zh="ÁõÆÊ†á‰ªΩÈáèÔºö">Want to serve:</label>
                           <input type="number" class="input-field" id="newPortions" value="6" style="max-width: 100px;">
                           <button class="convert-btn" onclick="calculatePortions()" data-lang-en="Calculate" data-lang-zh="ËÆ°ÁÆó">Calculate</button>
                       </div>
                       <div class="result" id="portionResult"></div>
                   </div>
               </div>
           </div>
       </div>
   
       <!-- Â§çÂà∂ÊàêÂäüÊèêÁ§∫ -->
       <div id="copyToast" class="copy-toast">
           <span data-lang-en="Copied to clipboard!" data-lang-zh="Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ">Copied to clipboard!</span>
       </div>
   
       <script>
           let currentLanguage = 'en';
           let isDarkTheme = false;
           
           // Language translations
           const translations = {
               en: {
                   title: "Kitchen Converter - Easy Cooking Unit Conversion",
                   alertInvalidNumber: "Please enter a valid number",
                   alertInvalidPortions: "Please enter valid portion numbers",
                   recipeFactor: "Recipe Scaling Factor:",
                   multiplyIngredients: "Multiply all ingredients by",
                   examples: "Examples:",
                   commonConversions: "Common Conversions:",
                   switchToDark: "Switch to Dark Mode",
                   switchToLight: "Switch to Light Mode"
               },
               zh: {
                   title: "Âé®ÊàøËΩ¨Êç¢Âô® - Âø´ÈÄüÁÉπÈ•™Âçï‰ΩçËΩ¨Êç¢Â∑•ÂÖ∑",
                   alertInvalidNumber: "ËØ∑ËæìÂÖ•ÊúâÊïàÊï∞Â≠ó",
                   alertInvalidPortions: "ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑ‰ªΩÈáèÊï∞Â≠ó",
                   recipeFactor: "È£üË∞±Áº©ÊîæÁ≥ªÊï∞Ôºö",
                   multiplyIngredients: "ÊâÄÊúâÈ£üÊùê‰πò‰ª•",
                   examples: "Á§∫‰æãÔºö",
                   commonConversions: "Â∏∏Áî®ËΩ¨Êç¢Ôºö",
                   switchToDark: "ÂàáÊç¢Âà∞Â§úÈó¥Ê®°Âºè",
                   switchToLight: "ÂàáÊç¢Âà∞Êó•Èó¥Ê®°Âºè"
               }
           };
   
           // Unit conversion data
           const conversions = {
               weight: {
                   g: 1,
                   kg: 1000,
                   oz: 28.3495,
                   lb: 453.592
               },
               volume: {
                   ml: 1,
                   l: 1000,
                   cup: 240,
                   tbsp: 15,
                   tsp: 5,
                   'fl-oz': 29.5735
               }
           };
   
           // Êâ©Â±ïÁöÑÈ£üÊùêÊï∞ÊçÆÂ∫ì
           const ingredients = {
               // ÁÉòÁÑôÁ±ª
               flour: {
                   name: { en: "All-Purpose Flour", zh: "‰∏≠Á≠ãÈù¢Á≤â" },
                   category: "baking",
                   conversions: {
                       en: ["1 cup = 140g", "1 tablespoon = 9g", "1 teaspoon = 3g", "1 pound = 454g = 3¬º cups"],
                       zh: ["1ÊùØ = 140ÂÖã", "1Ê±§Âåô = 9ÂÖã", "1Ëå∂Âåô = 3ÂÖã", "1Á£Ö = 454ÂÖã = 3¬ºÊùØ"]
                   }
               },
               sugar: {
                   name: { en: "Granulated Sugar", zh: "ÁªÜÁ†ÇÁ≥ñ" },
                   category: "baking",
                   conversions: {
                       en: ["1 cup = 200g", "1 tablespoon = 12g", "1 teaspoon = 4g", "1 pound = 454g = 2¬º cups"],
                       zh: ["1ÊùØ = 200ÂÖã", "1Ê±§Âåô = 12ÂÖã", "1Ëå∂Âåô = 4ÂÖã", "1Á£Ö = 454ÂÖã = 2¬ºÊùØ"]
                   }
               },
               brownSugar: {
                   name: { en: "Brown Sugar", zh: "Á∫¢Á≥ñ" },
                   category: "baking",
                   conversions: {
                       en: ["1 cup packed = 220g", "1 tablespoon = 14g", "1 teaspoon = 5g", "1 pound = 454g = 2 cups packed"],
                       zh: ["1ÊùØÂéãÂÆû = 220ÂÖã", "1Ê±§Âåô = 14ÂÖã", "1Ëå∂Âåô = 5ÂÖã", "1Á£Ö = 454ÂÖã = 2ÊùØÂéãÂÆû"]
                   }
               },
               bakingPowder: {
                   name: { en: "Baking Powder", zh: "Ê≥°ÊâìÁ≤â" },
                   category: "baking",
                   conversions: {
                       en: ["1 teaspoon = 4g", "1 tablespoon = 12g", "1 cup = 192g", "1 packet = 7g = 1¬æ teaspoons"],
                       zh: ["1Ëå∂Âåô = 4ÂÖã", "1Ê±§Âåô = 12ÂÖã", "1ÊùØ = 192ÂÖã", "1ÂåÖ = 7ÂÖã = 1¬æËå∂Âåô"]
                   }
               },
               
               // Ê∂≤‰ΩìÁ±ª
               milk: {
                   name: { en: "Milk", zh: "ÁâõÂ•∂" },
                   category: "liquid",
                   conversions: {
                       en: ["1 cup = 240ml", "1 tablespoon = 15ml", "1 teaspoon = 5ml", "1 liter = 1000ml = 4¬º cups"],
                       zh: ["1ÊùØ = 240ÊØ´Âçá", "1Ê±§Âåô = 15ÊØ´Âçá", "1Ëå∂Âåô = 5ÊØ´Âçá", "1Âçá = 1000ÊØ´Âçá = 4¬ºÊùØ"]
                   }
               },
               oil: {
                   name: { en: "Vegetable Oil", zh: "Ê§çÁâ©Ê≤π" },
                   category: "liquid",
                   conversions: {
                       en: ["1 cup = 240ml = 200g", "1 tablespoon = 15ml = 12g", "1 teaspoon = 5ml = 4g", "1 liter = 4‚Öì cups"],
                       zh: ["1ÊùØ = 240ÊØ´Âçá = 200ÂÖã", "1Ê±§Âåô = 15ÊØ´Âçá = 12ÂÖã", "1Ëå∂Âåô = 5ÊØ´Âçá = 4ÂÖã", "1Âçá = 4‚ÖìÊùØ"]
                   }
               },
               cream: {
                   name: { en: "Heavy Cream", zh: "Ê∑°Â•∂Ê≤π" },
                   category: "liquid",
                   conversions: {
                       en: ["1 cup = 240ml = 230g", "1 tablespoon = 15ml = 14g", "1 teaspoon = 5ml = 5g", "1 pint = 480ml = 2 cups"],
                       zh: ["1ÊùØ = 240ÊØ´Âçá = 230ÂÖã", "1Ê±§Âåô = 15ÊØ´Âçá = 14ÂÖã", "1Ëå∂Âåô = 5ÊØ´Âçá = 5ÂÖã", "1ÂìÅËÑ± = 480ÊØ´Âçá = 2ÊùØ"]
                   }
               },
               honey: {
                   name: { en: "Honey", zh: "ËúÇËúú" },
                   category: "liquid",
                   conversions: {
                       en: ["1 cup = 340g", "1 tablespoon = 21g", "1 teaspoon = 7g", "1 pound = 454g = 1‚Öì cups"],
                       zh: ["1ÊùØ = 340ÂÖã", "1Ê±§Âåô = 21ÂÖã", "1Ëå∂Âåô = 7ÂÖã", "1Á£Ö = 454ÂÖã = 1‚ÖìÊùØ"]
                   }
               },
               
               // ËõãÁôΩË¥®Á±ª
               butter: {
                   name: { en: "Butter", zh: "ÈªÑÊ≤π" },
                   category: "protein",
                   conversions: {
                       en: ["1 cup = 227g = 8 oz", "1 tablespoon = 14g", "1 stick = 113g = ¬Ω cup", "1 pound = 454g = 4 sticks"],
                       zh: ["1ÊùØ = 227ÂÖã = 8ÁõéÂè∏", "1Ê±§Âåô = 14ÂÖã", "1Êù° = 113ÂÖã = ¬ΩÊùØ", "1Á£Ö = 454ÂÖã = 4Êù°"]
                   }
               },
               eggs: {
                   name: { en: "Eggs", zh: "È∏°Ëõã" },
                   category: "protein",
                   conversions: {
                       en: ["1 large egg = 50g = 3 tablespoons", "1 egg white = 30g = 2 tablespoons", "1 egg yolk = 20g = 1 tablespoon", "12 eggs = 1 pound"],
                       zh: ["1‰∏™Â§ßÈ∏°Ëõã = 50ÂÖã = 3Ê±§Âåô", "1‰∏™ËõãÁôΩ = 30ÂÖã = 2Ê±§Âåô", "1‰∏™ËõãÈªÑ = 20ÂÖã = 1Ê±§Âåô", "12‰∏™È∏°Ëõã = 1Á£Ö"]
                   }
               },
               almonds: {
                   name: { en: "Almonds", zh: "Êùè‰ªÅ" },
                   category: "protein",
                   conversions: {
                       en: ["1 cup whole = 140g", "1 cup sliced = 85g", "1 cup ground = 100g", "1 pound = 454g = 3¬º cups whole"],
                       zh: ["1ÊùØÊï¥Á≤í = 140ÂÖã", "1ÊùØÂàáÁâá = 85ÂÖã", "1ÊùØÁ£®Á≤â = 100ÂÖã", "1Á£Ö = 454ÂÖã = 3¬ºÊùØÊï¥Á≤í"]
                   }
               },
               
               // Ë∞ÉÊñôÁ±ª
               rice: {
                   name: { en: "Rice (uncooked)", zh: "Â§ßÁ±≥ÔºàÁîüÁ±≥Ôºâ" },
                   category: "spice",
                   conversions: {
                       en: ["1 cup = 185g", "1 tablespoon = 12g", "1 pound = 454g = 2¬Ω cups", "1 cup uncooked = 3 cups cooked"],
                       zh: ["1ÊùØ = 185ÂÖã", "1Ê±§Âåô = 12ÂÖã", "1Á£Ö = 454ÂÖã = 2¬ΩÊùØ", "1ÊùØÁîüÁ±≥ = 3ÊùØÁÜüÁ±≥"]
                   }
               },
               salt: {
                   name: { en: "Salt", zh: "Áõê" },
                   category: "spice",
                   conversions: {
                       en: ["1 teaspoon = 6g", "1 tablespoon = 18g", "1 cup = 288g", "1 pound = 454g = 1‚Öî cups"],
                       zh: ["1Ëå∂Âåô = 6ÂÖã", "1Ê±§Âåô = 18ÂÖã", "1ÊùØ = 288ÂÖã", "1Á£Ö = 454ÂÖã = 1‚ÖîÊùØ"]
                   }
               },
               vanilla: {
                   name: { en: "Vanilla Extract", zh: "È¶ôËçâÁ≤æ" },
                   category: "spice",
                   conversions: {
                       en: ["1 teaspoon = 5ml", "1 tablespoon = 15ml", "1 cup = 240ml", "1 bottle (2oz) = 60ml = 4 tablespoons"],
                       zh: ["1Ëå∂Âåô = 5ÊØ´Âçá", "1Ê±§Âåô = 15ÊØ´Âçá", "1ÊùØ = 240ÊØ´Âçá", "1Áì∂(2ÁõéÂè∏) = 60ÊØ´Âçá = 4Ê±§Âåô"]
                   }
               },
               lemon: {
                   name: { en: "Lemon", zh: "Êü†Ê™¨" },
                   category: "spice",
                   conversions: {
                       en: ["1 medium lemon = 60ml juice = ¬º cup", "1 lemon zest = 1 tablespoon", "1 cup juice = 240ml = 4-6 lemons", "1 pound = 454g = 4-5 lemons"],
                       zh: ["1‰∏™‰∏≠Á≠âÊü†Ê™¨ = 60ÊØ´ÂçáÊ±Å = ¬ºÊùØ", "1‰∏™Êü†Ê™¨ÁöÆÂ±ë = 1Ê±§Âåô", "1ÊùØÊü†Ê™¨Ê±Å = 240ÊØ´Âçá = 4-6‰∏™Êü†Ê™¨", "1Á£Ö = 454ÂÖã = 4-5‰∏™Êü†Ê™¨"]
                   }
               }
           };
   
           // ÂéÜÂè≤ËÆ∞ÂΩïÁÆ°ÁêÜ
           let conversionHistory = {
               weight: [],
               volume: [],
               temp: []
           };
   
           // ‰øÆÂ§çÁöÑËØ≠Ë®ÄÂàáÊç¢ÂäüËÉΩ
           function switchLanguage(lang, buttonElement) {
               currentLanguage = lang;
               
               // Update active language button
               document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
               if (buttonElement) {
                   buttonElement.classList.add('active');
               }
               
               // Update all text elements
               document.querySelectorAll('[data-lang-en]').forEach(element => {
                   const enText = element.getAttribute('data-lang-en');
                   const zhText = element.getAttribute('data-lang-zh');
                   element.textContent = lang === 'en' ? enText : zhText;
               });
               
               // Update placeholders
               document.querySelectorAll('[data-placeholder-en]').forEach(element => {
                   const enPlaceholder = element.getAttribute('data-placeholder-en');
                   const zhPlaceholder = element.getAttribute('data-placeholder-zh');
                   element.placeholder = lang === 'en' ? enPlaceholder : zhPlaceholder;
               });
               
               // Update select options
               document.querySelectorAll('option[data-lang-en]').forEach(option => {
                   const enText = option.getAttribute('data-lang-en');
                   const zhText = option.getAttribute('data-lang-zh');
                   option.textContent = lang === 'en' ? enText : zhText;
               });
               
               // Update page title
               document.title = translations[lang].title;
               
               // ÈáçÊñ∞ÁîüÊàêÈ£üÊùêÂàóË°®‰ª•Êõ¥Êñ∞ËØ≠Ë®Ä
               generateIngredientList();
               
               // Êõ¥Êñ∞‰∏ªÈ¢òÊåâÈíÆÊñáÂ≠ó
               updateThemeButton();
               
               // Êõ¥Êñ∞ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
               updateAllHistoryDisplays();
           }
   
           // ‰øÆÂ§çÁöÑÊ†áÁ≠æÂàáÊç¢
           function showTab(tabName, buttonElement) {
               // Hide all tab contents
               const tabs = document.querySelectorAll('.tab-content');
               tabs.forEach(tab => tab.style.display = 'none');
               
               // Remove active class from all tabs
               const tabButtons = document.querySelectorAll('.tab');
               tabButtons.forEach(tab => tab.classList.remove('active'));
               
               // Show selected tab
               document.getElementById(tabName + '-converter').style.display = 'block';
               if (buttonElement) {
                   buttonElement.classList.add('active');
               }
           }
   
           // Weight conversion
           function convertWeight() {
               const input = parseFloat(document.getElementById('weightInput').value);
               const fromUnit = document.getElementById('weightFrom').value;
               const toUnit = document.getElementById('weightTo').value;
               
               if (isNaN(input)) {
                   alert(translations[currentLanguage].alertInvalidNumber);
                   return;
               }
               
               // Convert to grams first, then to target unit
               const grams = input * conversions.weight[fromUnit];
               const result = grams / conversions.weight[toUnit];
               
               // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫ÔºàÊîØÊåÅÂ§çÂà∂Ôºâ
               const resultText = `${input} ${fromUnit} = ${result.toFixed(2)} ${toUnit}`;
               document.getElementById('weightResultText').innerHTML = `<strong>${resultText}</strong>`;
               document.getElementById('weightResult').style.display = 'flex';
               
               // ‰øùÂ≠òÁªìÊûúÁî®‰∫éÂ§çÂà∂
               window.lastWeightResult = resultText;
               
               // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
               addToHistory('weight', input, fromUnit, toUnit, result.toFixed(2));
           }
   
           // Volume conversion
           function convertVolume() {
               const input = parseFloat(document.getElementById('volumeInput').value);
               const fromUnit = document.getElementById('volumeFrom').value;
               const toUnit = document.getElementById('volumeTo').value;
               
               if (isNaN(input)) {
                   alert(translations[currentLanguage].alertInvalidNumber);
                   return;
               }
               
               // Convert to ml first, then to target unit
               const ml = input * conversions.volume[fromUnit];
               const result = ml / conversions.volume[toUnit];
               
               // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫ÔºàÊîØÊåÅÂ§çÂà∂Ôºâ
               const resultText = `${input} ${fromUnit} = ${result.toFixed(2)} ${toUnit}`;
               document.getElementById('volumeResultText').innerHTML = `<strong>${resultText}</strong>`;
               document.getElementById('volumeResult').style.display = 'flex';
               
               // ‰øùÂ≠òÁªìÊûúÁî®‰∫éÂ§çÂà∂
               window.lastVolumeResult = resultText;
               
               // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
               addToHistory('volume', input, fromUnit, toUnit, result.toFixed(2));
           }
   
           // Temperature conversion
           function convertTemperature() {
               const input = parseFloat(document.getElementById('tempInput').value);
               const fromUnit = document.getElementById('tempFrom').value;
               const toUnit = document.getElementById('tempTo').value;
               
               if (isNaN(input)) {
                   alert(translations[currentLanguage].alertInvalidNumber);
                   return;
               }
               
               let result;
               if (fromUnit === 'c' && toUnit === 'f') {
                   result = (input * 9/5) + 32;
               } else if (fromUnit === 'f' && toUnit === 'c') {
                   result = (input - 32) * 5/9;
               } else {
                   result = input;
               }
               
               const units = { c: '¬∞C', f: '¬∞F' };
               
               // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫ÔºàÊîØÊåÅÂ§çÂà∂Ôºâ
               const resultText = `${input}${units[fromUnit]} = ${result.toFixed(1)}${units[toUnit]}`;
               document.getElementById('tempResultText').innerHTML = `<strong>${resultText}</strong>`;
               document.getElementById('tempResult').style.display = 'flex';
               
               // ‰øùÂ≠òÁªìÊûúÁî®‰∫éÂ§çÂà∂
               window.lastTempResult = resultText;
               
               // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
               addToHistory('temp', input, units[fromUnit], units[toUnit], result.toFixed(1));
           }
   
           // ÁîüÊàêÈ£üÊùêÂàóË°®
           function generateIngredientList() {
               const container = document.getElementById('ingredientList');
               if (!container) return;
               
               container.innerHTML = '';
               
               Object.keys(ingredients).forEach(key => {
                   const ingredient = ingredients[key];
                   const div = document.createElement('div');
                   div.className = 'ingredient-item';
                   div.setAttribute('data-category', ingredient.category);
                   div.onclick = () => showIngredientInfo(key);
                   
                   const name = ingredient.name[currentLanguage];
                   const mainConversion = ingredient.conversions[currentLanguage][0];
                   
                   div.innerHTML = `
                       <strong>${name}</strong><br>
                       <small>${mainConversion}</small>
                   `;
                   
                   container.appendChild(div);
               });
           }
   
           // ‰øÆÂ§çÁöÑÂàÜÁ±ªÁ≠õÈÄâÂäüËÉΩ
           function filterByCategory(category, buttonElement) {
               const items = document.querySelectorAll('.ingredient-item');
               const buttons = document.querySelectorAll('.category-btn');
               
               // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
               buttons.forEach(btn => btn.classList.remove('active'));
               if (buttonElement) {
                   buttonElement.classList.add('active');
               }
               
               // ÊòæÁ§∫/ÈöêËóèÈ£üÊùê
               items.forEach(item => {
                   if (category === 'all' || item.getAttribute('data-category') === category) {
                       item.classList.remove('hidden');
                   } else {
                       item.classList.add('hidden');
                   }
               });
           }
   
           // ÊêúÁ¥¢ÂäüËÉΩ
           function filterIngredients() {
               const searchTerm = document.getElementById('ingredientSearch').value.toLowerCase();
               const items = document.querySelectorAll('.ingredient-item');
               
               items.forEach(item => {
                   const text = item.textContent.toLowerCase();
                   if (text.includes(searchTerm)) {
                       item.classList.remove('hidden');
                   } else {
                       item.classList.add('hidden');
                   }
               });
           }
   
           // Show ingredient information
           function showIngredientInfo(ingredientKey) {
               const ingredient = ingredients[ingredientKey];
               const name = ingredient.name[currentLanguage];
               const conversions = ingredient.conversions[currentLanguage];
               
               let html = `<h4>${name} - ${translations[currentLanguage].commonConversions}</h4><ul>`;
               
               conversions.forEach(conversion => {
                   html += `<li>${conversion}</li>`;
               });
               
               html += '</ul>';
               
               document.getElementById('ingredientResult').innerHTML = html;
               document.getElementById('ingredientResult').style.display = 'block';
           }
   
           // Calculate portions
           function calculatePortions() {
               const original = parseFloat(document.getElementById('originalPortions').value);
               const newAmount = parseFloat(document.getElementById('newPortions').value);
               
               if (isNaN(original) || isNaN(newAmount) || original <= 0 || newAmount <= 0) {
                   alert(translations[currentLanguage].alertInvalidPortions);
                   return;
               }
               
               const multiplier = newAmount / original;
               
               let html = `<strong>${translations[currentLanguage].recipeFactor} ${multiplier.toFixed(2)}</strong><br><br>`;
               html += `${translations[currentLanguage].multiplyIngredients} <strong>${multiplier.toFixed(2)}</strong><br><br>`;
               html += `<div class="portion-example">`;
               html += `${translations[currentLanguage].examples}<br>`;
               
               if (currentLanguage === 'en') {
                   html += `‚Ä¢ 1 cup flour ‚Üí ${(1 * multiplier).toFixed(2)} cups flour<br>`;
                   html += `‚Ä¢ 2 tablespoons oil ‚Üí ${(2 * multiplier).toFixed(2)} tablespoons oil<br>`;
                   html += `‚Ä¢ 500g meat ‚Üí ${(500 * multiplier).toFixed(0)}g meat`;
               } else {
                   html += `‚Ä¢ 1ÊùØÈù¢Á≤â ‚Üí ${(1 * multiplier).toFixed(2)}ÊùØÈù¢Á≤â<br>`;
                   html += `‚Ä¢ 2Ê±§ÂåôÊ≤π ‚Üí ${(2 * multiplier).toFixed(2)}Ê±§ÂåôÊ≤π<br>`;
                   html += `‚Ä¢ 500ÂÖãËÇâ ‚Üí ${(500 * multiplier).toFixed(0)}ÂÖãËÇâ`;
               }
               html += `</div>`;
               
               document.getElementById('portionResult').innerHTML = html;
               document.getElementById('portionResult').style.display = 'block';
           }
   
           // ÂéÜÂè≤ËÆ∞ÂΩïÂäüËÉΩ
           function loadHistory() {
               const saved = localStorage.getItem('kitchenConverterHistory');
               if (saved) {
                   try {
                       conversionHistory = JSON.parse(saved);
                       updateAllHistoryDisplays();
                   } catch (e) {
                       console.error('Failed to load history:', e);
                       conversionHistory = { weight: [], volume: [], temp: [] };
                   }
               }
           }
   
           function saveHistory() {
               try {
                   localStorage.setItem('kitchenConverterHistory', JSON.stringify(conversionHistory));
               } catch (e) {
                   console.error('Failed to save history:', e);
               }
           }
   
           function addToHistory(type, inputValue, fromUnit, toUnit, resultValue) {
               const record = {
                   input: `${inputValue} ${fromUnit}`,
                   result: `${resultValue} ${toUnit}`,
                   timestamp: new Date().toLocaleTimeString(),
                   fullText: `${inputValue} ${fromUnit} = ${resultValue} ${toUnit}`
               };
               
               // Ê∑ªÂä†Âà∞Êï∞ÁªÑÂºÄÂ§¥ÔºåÈôêÂà∂ÊúÄÂ§ö10Êù°ËÆ∞ÂΩï
               conversionHistory[type].unshift(record);
               if (conversionHistory[type].length > 10) {
                   conversionHistory[type].pop();
               }
               
               saveHistory();
               updateHistoryDisplay(type);
           }
   
           function updateHistoryDisplay(type) {
               const historyList = document.getElementById(type + 'HistoryList');
               const historySection = document.getElementById(type + 'History');
               
               if (!historyList || !historySection) return;
               
               if (conversionHistory[type].length === 0) {
                   historyList.innerHTML = `<div class="no-history">${currentLanguage === 'en' ? 'No recent conversions' : 'ÊöÇÊó†ËΩ¨Êç¢ËÆ∞ÂΩï'}</div>`;
                   historySection.style.display = 'none';
                   return;
               }
               
               historySection.style.display = 'block';
               historyList.innerHTML = '';
               
               conversionHistory[type].forEach((record, index) => {
                   const item = document.createElement('div');
                   item.className = 'history-item';
                   item.onclick = () => reuseConversion(type, record);
                   
                   // ÂÆâÂÖ®ÂàõÂª∫Â§çÂà∂ÊåâÈíÆ
                   const copyBtnContainer = document.createElement('div');
                   copyBtnContainer.style.cssText = 'display: flex; align-items: center; gap: 8px;';
                   
                   const timestamp = document.createElement('span');
                   timestamp.className = 'timestamp';
                   timestamp.textContent = record.timestamp;
                   
                   const copyBtn = document.createElement('button');
                   copyBtn.className = 'copy-btn';
                   copyBtn.textContent = 'üìã';
                   copyBtn.onclick = (e) => {
                       e.stopPropagation();
                       copyHistoryItem(record.fullText);
                   };
                   
                   copyBtnContainer.appendChild(timestamp);
                   copyBtnContainer.appendChild(copyBtn);
                   
                   const conversionText = document.createElement('span');
                   conversionText.className = 'conversion-text';
                   conversionText.textContent = record.fullText;
                   
                   item.appendChild(conversionText);
                   item.appendChild(copyBtnContainer);
                   
                   historyList.appendChild(item);
               });
           }
   
           function updateAllHistoryDisplays() {
               updateHistoryDisplay('weight');
               updateHistoryDisplay('volume');
               updateHistoryDisplay('temp');
           }
   
           function reuseConversion(type, record) {
               const parts = record.input.split(' ');
               const inputValue = parts[0];
               const fromUnit = parts.slice(1).join(' ');
               
               if (type === 'weight') {
                   document.getElementById('weightInput').value = inputValue;
                   // Â∞ùËØïËÆæÁΩÆÂçï‰ΩçÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®Âàô‰ΩøÁî®ÈªòËÆ§
                   const fromSelect = document.getElementById('weightFrom');
                   if ([...fromSelect.options].some(option => option.value === fromUnit)) {
                       fromSelect.value = fromUnit;
                   }
                   convertWeight();
               } else if (type === 'volume') {
                   document.getElementById('volumeInput').value = inputValue;
                   const fromSelect = document.getElementById('volumeFrom');
                   if ([...fromSelect.options].some(option => option.value === fromUnit)) {
                       fromSelect.value = fromUnit;
                   }
                   convertVolume();
               } else if (type === 'temp') {
                   document.getElementById('tempInput').value = inputValue;
                   const fromSelect = document.getElementById('tempFrom');
                   if ([...fromSelect.options].some(option => option.value === fromUnit.replace('¬∞', ''))) {
                       fromSelect.value = fromUnit.replace('¬∞', '');
                   }
                   convertTemperature();
               }
           }
   
           function clearHistory(type) {
               conversionHistory[type] = [];
               saveHistory();
               updateHistoryDisplay(type);
           }
   
           // ‰∏ªÈ¢òÁÆ°ÁêÜ
           function loadTheme() {
               const savedTheme = localStorage.getItem('kitchenConverterTheme');
               if (savedTheme === 'dark') {
                   isDarkTheme = true;
                   document.body.classList.add('dark-theme');
                   updateThemeButton();
               }
           }
   
           function saveTheme() {
               try {
                   localStorage.setItem('kitchenConverterTheme', isDarkTheme ? 'dark' : 'light');
               } catch (e) {
                   console.error('Failed to save theme:', e);
               }
           }
   
           function toggleTheme() {
               isDarkTheme = !isDarkTheme;
               
               if (isDarkTheme) {
                   document.body.classList.add('dark-theme');
               } else {
                   document.body.classList.remove('dark-theme');
               }
               
               updateThemeButton();
               saveTheme();
           }
   
           function updateThemeButton() {
               const themeBtn = document.getElementById('themeBtn');
               if (themeBtn) {
                   if (isDarkTheme) {
                       themeBtn.textContent = '‚òÄÔ∏è';
                       themeBtn.title = translations[currentLanguage].switchToLight;
                   } else {
                       themeBtn.textContent = 'üåô';
                       themeBtn.title = translations[currentLanguage].switchToDark;
                   }
               }
           }
   
           // Â§çÂà∂ÂäüËÉΩ
           function copyResult(type) {
               let textToCopy = '';
               
               switch(type) {
                   case 'weight':
                       textToCopy = window.lastWeightResult || '';
                       break;
                   case 'volume':
                       textToCopy = window.lastVolumeResult || '';
                       break;
                   case 'temp':
                       textToCopy = window.lastTempResult || '';
                       break;
                   default:
                       return;
               }
               
               if (!textToCopy) return;
               
               copyToClipboard(textToCopy);
           }
   
           function copyHistoryItem(text) {
               copyToClipboard(text);
           }
   
           function copyToClipboard(text) {
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
            showCopyToast();
        }).catch(() => {
            fallbackCopy(text);
        });
    } else {
        fallbackCopy(text);
    }
}


        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            textArea.style.top = '-9999px';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopyToast();
            } catch (err) {
                console.error('Â§çÂà∂Â§±Ë¥•:', err);
                alert(currentLanguage === 'en' ? 'Copy failed' : 'Â§çÂà∂Â§±Ë¥•');
            }
            
            document.body.removeChild(textArea);
        }

        function showCopyToast() {
            const toast = document.getElementById('copyToast');
            if (!toast) return;
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // Initialize - È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÊâßË°å
        document.addEventListener('DOMContentLoaded', function() {
            try {
                showTab('basic', document.querySelector('.tab.active'));
                generateIngredientList();
                loadHistory();
                loadTheme();
            } catch (e) {
                console.error('Initialization error:', e);
            }
        });

        // ÈîôËØØÂ§ÑÁêÜÔºöÈò≤Ê≠¢Êú™ÂÆö‰πâÁöÑÂáΩÊï∞Ë∞ÉÁî®
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('JavaScript Error:', msg, 'at line:', lineNo);
            return false;
        };
    </script>
</body>
</html>

   
                
                
